= form_for([@event, @documents_beznal_schet], :html => {:class => 'form-validate'}) do |f|

  %h4 
    Счет №#{@documents_beznal_schet.num_schet} от
    %span.date-picker{"data-field" => '#documents_beznal_schet_date_schet'} #{@documents_beznal_schet.date_schet.strftime("%d.%m.%Y")}

  = f.hidden_field :num_schet
  = f.hidden_field :date_schet

  = f.label :company_id, "Заказчик*"
  - @companies = Company.all
  = f.collection_select(:company_id, @companies, :id, :name)

  = f.label :description, "Назначение платежа*"
  = f.text_field :description, :class => 'span7', "data-required" => 'true'

  .row
    .span4
      = f.label :name, "ФИО заказчика"
      = f.text_field :name, :class => 'span4'
    .span3
      = f.label :telephone, "Мобильный телефон заказчика"
      = f.text_field :telephone, :class => 'span3'

  .row
    .span2
      = f.label :dogovor_num, "Договор №*"
      = f.text_field :dogovor_num, :class => 'span2', "data-required" => 'true'
    .span2
      .span-date.pull-right
        = f.label :date_schet, "Дата договора*", :class => 'no-margin'
        .input-prepend.input-prepend-margin.date-picker.pull-right{"data-date" => (@documents_beznal_schet.dogovor_date.strftime("%d.%m.%Y") unless @documents_beznal_schet.dogovor_date.blank?) }
          %span.add-on
            %i.icon-calendar
          = f.text_field :dogovor_date, :class => 'input-date', "data-required" => 'true', :value => (@documents_beznal_schet.dogovor_date.strftime("%d.%m.%Y") unless @documents_beznal_schet.dogovor_date.blank?)
    .span2
      = f.label :summ, "Сумма*"
      = f.text_field :summ, :class => 'span2', "data-required" => 'true'
    .span1
      = f.label :nds, "НДС*"
      = f.text_field :nds, :class => 'span1', "data-required" => 'true'

  = f.label :payment_date, "Дата оплаты", :class => 'no-margin'
  .input-prepend.input-prepend-margin.date-picker{"data-date" => (@documents_beznal_schet.info_date_act.strftime("%d.%m.%Y")unless @documents_beznal_schet.info_date_act.blank?) }
    %span.add-on
      %i.icon-calendar
    = f.text_field :payment_date, :class => 'input-date', :value => (@documents_beznal_schet.payment_date.strftime("%d.%m.%Y") unless @documents_beznal_schet.payment_date.blank?)

  %hr
  
  %h4 Информация по исходящим закрывающим документам

  .row
    .span2
      = f.label :info_schet_factura, "Счет-фактура №"
      = f.text_field :info_schet_factura, :class => 'span2'
    .span2
      .span-date.pull-right
        = f.label :info_date_schet, "Дата сч.фактуры", :class => 'no-margin'
        .input-prepend.input-prepend-margin.date-picker.pull-right{"data-date" => (@documents_beznal_schet.info_date_schet.strftime("%d.%m.%Y") unless @documents_beznal_schet.info_date_schet.blank?)}
          %span.add-on
            %i.icon-calendar
          = f.text_field :info_date_schet, :class => 'input-date', :value => (@documents_beznal_schet.info_date_schet.strftime("%d.%m.%Y") unless @documents_beznal_schet.info_date_schet.blank?)

  .row
    .span2
      = f.label :info_act, "Акт №"
      = f.text_field :info_act, :class => 'span2'
    .span2
      .span-date.pull-right
        = f.label :info_date_act, "Дата акта", :class => 'no-margin'
        .input-prepend.input-prepend-margin.date-picker.pull-right{"data-date" => (@documents_beznal_schet.info_date_act.strftime("%d.%m.%Y") unless @documents_beznal_schet.info_date_act.blank?) }
          %span.add-on
            %i.icon-calendar
          = f.text_field :info_date_act, :class => 'input-date', :value => (@documents_beznal_schet.info_date_act.strftime("%d.%m.%Y") unless @documents_beznal_schet.info_date_act.blank?)

  %p 
    Адрес отправления:
    %span#address-company

  = f.label :info_state_act, 'Статус отправления закрывающих документов'
  = f.select :info_state_act, %w(отправлен неотправлен).map { |t| [t]*2 }, {}, { :class => 'span2' }

  .row
    .span2
      = f.label :info_type_return_act, "Способ отправки"
      = f.select :info_type_return_act,  %w(почтой курьером службой\ доставки).map { |t| [t]*2 }, {}, { :class => 'span2' }
    .span2
      .span-date.pull-right
        = f.label :info_return_date, "Дата отправки", :class => 'no-margin'
        .input-prepend.input-prepend-margin.date-picker.pull-right{"data-date" => (@documents_beznal_schet.info_return_date.strftime("%d.%m.%Y") unless @documents_beznal_schet.info_return_date.blank?) }
          %span.add-on
            %i.icon-calendar
          = f.text_field :info_return_date, :class => 'input-date', :value => (@documents_beznal_schet.info_return_date.strftime("%d.%m.%Y") unless @documents_beznal_schet.info_return_date.blank?)

  = f.label :info_name_sender, "ФИО отправителя закрывающих документов"
  = f.text_field :info_name_sender, :class => 'span4'

  %br

  = f.submit 'Сохранить', :class => 'btn btn-primary btn-primary-submit'

:javascript
  window.companies = #{@companies.to_json}
